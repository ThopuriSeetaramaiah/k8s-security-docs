"use strict";(self.webpackChunkk8s_security_docs=self.webpackChunkk8s_security_docs||[]).push([[1],{8453:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>l});var s=r(6540);const i={},t=s.createContext(i);function c(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(t.Provider,{value:n},e.children)}},9958:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"best-practices/cluster-security","title":"Cluster Security","description":"Securing your Kubernetes cluster at the infrastructure level is the foundation of a robust security posture. This guide covers best practices for securing the Kubernetes control plane and worker nodes.","source":"@site/docs/best-practices/cluster-security.md","sourceDirName":"best-practices","slug":"/best-practices/cluster-security","permalink":"/docs/best-practices/cluster-security","draft":false,"unlisted":false,"editUrl":"https://github.com/ThopuriSeetaramaiah/k8s-security-docs/tree/main/docs/best-practices/cluster-security.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start Guide","permalink":"/docs/getting-started/quick-start"},"next":{"title":"Pod Security","permalink":"/docs/best-practices/pod-security"}}');var i=r(4848),t=r(8453);const c={sidebar_position:1},l="Cluster Security",o={},a=[{value:"Control Plane Security",id:"control-plane-security",level:2},{value:"API Server",id:"api-server",level:3},{value:"etcd",id:"etcd",level:3},{value:"Encryption at Rest",id:"encryption-at-rest",level:3},{value:"Worker Node Security",id:"worker-node-security",level:2},{value:"Node Hardening",id:"node-hardening",level:3},{value:"Node Access Control",id:"node-access-control",level:3},{value:"Network Security",id:"network-security",level:2},{value:"Monitoring and Auditing",id:"monitoring-and-auditing",level:2},{value:"Regular Security Assessments",id:"regular-security-assessments",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"cluster-security",children:"Cluster Security"})}),"\n",(0,i.jsx)(n.p,{children:"Securing your Kubernetes cluster at the infrastructure level is the foundation of a robust security posture. This guide covers best practices for securing the Kubernetes control plane and worker nodes."}),"\n",(0,i.jsx)(n.h2,{id:"control-plane-security",children:"Control Plane Security"}),"\n",(0,i.jsx)(n.p,{children:"The control plane consists of the API server, etcd, controller manager, and scheduler. Securing these components is critical."}),"\n",(0,i.jsx)(n.h3,{id:"api-server",children:"API Server"}),"\n",(0,i.jsx)(n.p,{children:"The API server is the central component that processes all requests to the cluster."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Recommended API server flags\n--anonymous-auth=false\n--authorization-mode=Node,RBAC\n--enable-admission-plugins=NodeRestriction,PodSecurityPolicy,AlwaysPullImages\n--audit-log-path=/var/log/kubernetes/audit.log\n--audit-log-maxage=30\n--audit-log-maxbackup=10\n--audit-log-maxsize=100\n--encryption-provider-config=/etc/kubernetes/encryption/encryption-config.yaml\n--tls-cert-file=/etc/kubernetes/pki/apiserver.crt\n--tls-private-key-file=/etc/kubernetes/pki/apiserver.key\n--client-ca-file=/etc/kubernetes/pki/ca.crt\n"})}),"\n",(0,i.jsx)(n.h3,{id:"etcd",children:"etcd"}),"\n",(0,i.jsx)(n.p,{children:"etcd stores all cluster data and should be highly secured."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Recommended etcd flags\n--cert-file=/etc/kubernetes/pki/etcd/server.crt\n--key-file=/etc/kubernetes/pki/etcd/server.key\n--client-cert-auth=true\n--trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt\n--peer-cert-file=/etc/kubernetes/pki/etcd/peer.crt\n--peer-key-file=/etc/kubernetes/pki/etcd/peer.key\n--peer-client-cert-auth=true\n--peer-trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt\n--data-dir=/var/lib/etcd\n"})}),"\n",(0,i.jsx)(n.h3,{id:"encryption-at-rest",children:"Encryption at Rest"}),"\n",(0,i.jsx)(n.p,{children:"Configure encryption for secrets stored in etcd:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# /etc/kubernetes/encryption/encryption-config.yaml\napiVersion: apiserver.config.k8s.io/v1\nkind: EncryptionConfiguration\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: <base64-encoded-key>\n      - identity: {}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"worker-node-security",children:"Worker Node Security"}),"\n",(0,i.jsx)(n.p,{children:"Worker nodes run your containers and need to be secured against various threats."}),"\n",(0,i.jsx)(n.h3,{id:"node-hardening",children:"Node Hardening"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Minimize the attack surface"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use a minimal OS (like Container-Optimized OS, RancherOS)"}),"\n",(0,i.jsx)(n.li,{children:"Remove unnecessary packages and services"}),"\n",(0,i.jsx)(n.li,{children:"Regularly apply security patches"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Secure kubelet configuration"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# Recommended kubelet flags\n--anonymous-auth=false\n--authorization-mode=Webhook\n--client-ca-file=/etc/kubernetes/pki/ca.crt\n--read-only-port=0\n--protect-kernel-defaults=true\n--tls-cert-file=/etc/kubernetes/pki/kubelet.crt\n--tls-private-key-file=/etc/kubernetes/pki/kubelet.key\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Container runtime security"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use containerd or CRI-O with secure defaults"}),"\n",(0,i.jsx)(n.li,{children:"Enable seccomp and AppArmor profiles"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"node-access-control",children:"Node Access Control"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SSH hardening"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use SSH key authentication only"}),"\n",(0,i.jsx)(n.li,{children:"Disable root login"}),"\n",(0,i.jsx)(n.li,{children:"Use a bastion host for access"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Privileged access management"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implement just-in-time access"}),"\n",(0,i.jsx)(n.li,{children:"Use a solution like Teleport or AWS SSM for secure access"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"network-security",children:"Network Security"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Control plane isolation"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Place control plane components on a separate network"}),"\n",(0,i.jsx)(n.li,{children:"Use private endpoints for API server access"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node-to-node communication"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Encrypt all traffic with a network overlay like Calico or Cilium"}),"\n",(0,i.jsx)(n.li,{children:"Implement mutual TLS authentication"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-and-auditing",children:"Monitoring and Auditing"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Node-level monitoring"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Deploy a security agent like Falco"}),"\n",(0,i.jsx)(n.li,{children:"Monitor system calls and container activities"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Log collection and analysis"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Collect and centralize all node logs"}),"\n",(0,i.jsx)(n.li,{children:"Set up alerts for suspicious activities"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"regular-security-assessments",children:"Regular Security Assessments"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Vulnerability scanning"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Regularly scan nodes for vulnerabilities"}),"\n",(0,i.jsx)(n.li,{children:"Apply security patches promptly"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Compliance checks"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Run kube-bench regularly to check CIS compliance"}),"\n",(0,i.jsx)(n.li,{children:"Address any findings promptly"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.p,{children:["After securing your cluster infrastructure, proceed to ",(0,i.jsx)(n.a,{href:"pod-security",children:"Pod Security"})," to learn how to secure your workloads running on the cluster."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);